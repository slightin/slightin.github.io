import{_ as c,W as i,X as l,$ as u,Y as s,Z as n,a0 as a,a2 as p,a1 as r,C as e}from"./framework-474f8844.js";const k={},d=s("h1",{id:"河工程成绩提醒",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#河工程成绩提醒","aria-hidden":"true"},"#"),n(" 河工程成绩提醒")],-1),v=r(`<hr><h2 id="使用说明" tabindex="-1"><a class="header-anchor" href="#使用说明" aria-hidden="true">#</a> 使用说明</h2><p>安装完后点击此处，进入脚本列表</p><figure><img src="https://scriptcat.org/api/v1/resource/image/EH0Q944qjChJ54BN" alt="alt text" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>点击本脚本右方的设置</p><figure><img src="https://scriptcat.org/api/v1/resource/image/ri1JhCajqmE255rj" alt="alt text" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>在此输入学号后保存</p><figure><img src="https://scriptcat.org/api/v1/resource/image/djD4Bc6Fvm1okAn4" alt="alt text" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="运行效果" tabindex="-1"><a class="header-anchor" href="#运行效果" aria-hidden="true">#</a> 运行效果</h2><figure><img src="https://scriptcat.org/api/v1/resource/image/d1rO9uuhljif1D8M" alt="alt text" tabindex="0" loading="lazy"><figcaption>运行效果</figcaption></figure><details class="hint-container details"><summary>源码</summary><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ==UserScript==</span>
<span class="token comment">// @name         河工程新成绩通知(后台脚本，仅限脚本猫运行)</span>
<span class="token comment">// @namespace    icecola</span>
<span class="token comment">// @version      0.1.1</span>
<span class="token comment">// @description  用于河北工程大学学生新增成绩的提醒，后台脚本，仅限脚本猫安装</span>
<span class="token comment">// @author       万事可乐</span>
<span class="token comment">// @require      https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js</span>
<span class="token comment">// @require      https://cdn.jsdelivr.net/npm/js-base64@3.7.2/base64.min.js</span>
<span class="token comment">// @connect      http://27.188.65.169:9900/</span>
<span class="token comment">// @grant GM_xmlhttpRequest</span>
<span class="token comment">// @grant GM_notification</span>
<span class="token comment">// @grant GM_setValue</span>
<span class="token comment">// @grant GM_getValue</span>
<span class="token comment">// @grant GM_openInTab</span>
<span class="token comment">// @crontab      */10 * * * *</span>
<span class="token comment">// ==/UserScript==</span>
<span class="token comment">/* ==UserConfig==
user:
  id:
    title: 学号
    description: 检查无误后点击保存
    type: text
    min: 9
    max: 10
==/UserConfig== */</span>

<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> uid<span class="token operator">=</span><span class="token function">GM_getValue</span><span class="token punctuation">(</span><span class="token string">&#39;user.id&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>uid<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;错误-河工程成绩提醒&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;学号未输入，请输入学号后再使用\\n详情参考脚本安装界面&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;学号未输入&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> userurl<span class="token operator">=</span><span class="token string">&#39;http://27.188.65.169:9900/pjxfjdpm/maxcj.asp?MIDD=&#39;</span><span class="token operator">+</span>Base64<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// class course {</span>
    <span class="token comment">//     constructor(id,name,score){</span>
    <span class="token comment">//         this.id=id;</span>
    <span class="token comment">//         this.name=name;</span>
    <span class="token comment">//         this.score=score;</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// }</span>

    <span class="token function">GM_xmlhttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> userurl<span class="token punctuation">,</span>
        <span class="token literal-property property">overrideMimeType</span><span class="token operator">:</span><span class="token string">&quot;text/html;charset=gb2312&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">timeout</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onload</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#huegrade&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div id=huegrade&gt;&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#huegrade&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#huegrade&gt;script&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;错误-河工程成绩提醒&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;学号 &#39;</span><span class="token operator">+</span>uid<span class="token operator">+</span><span class="token string">&#39; 不存在，请检查&#39;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;学号输入有误&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;td &gt; table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;错误-河工程成绩提醒&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;课程读取出错&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">timeout</span><span class="token operator">:</span><span class="token number">5000</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;document加载有误&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;td &gt; table &gt; tbody&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id<span class="token operator">=</span><span class="token string">&quot;optable&quot;</span><span class="token punctuation">;</span>
            amount<span class="token operator">=</span><span class="token function">GM_getValue</span><span class="token punctuation">(</span><span class="token string">&quot;amount&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>amount<span class="token operator">==</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">GM_setValue</span><span class="token punctuation">(</span><span class="token string">&quot;amount&quot;</span><span class="token punctuation">,</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#optable&gt;tr[bgcolor=&#39;#F0F0F0&#39;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;河工程成绩提醒&quot;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;学号 &#39;</span><span class="token operator">+</span>uid<span class="token operator">+</span><span class="token string">&#39; 初始化成功&#39;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;初始化成功&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#optable&gt;tr[bgcolor=&#39;#F0F0F0&#39;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">==</span>amount<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;请求成功，无新增成绩&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#optable&gt;tr[bgcolor=&#39;#F0F0F0&#39;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">&gt;</span>amount<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;您有新的成绩提醒&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&#39;您有&#39;</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#optable&gt;tr[bgcolor=&#39;#F0F0F0&#39;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">-</span>amount<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&#39;门新成绩，点击查看详情&#39;</span><span class="token punctuation">,</span>
                    <span class="token comment">//timeout:5000,</span>
                    <span class="token function-variable function">onclick</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">GM_openInTab</span><span class="token punctuation">(</span>userurl<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">active</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">insert</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">ondone</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">GM_setValue</span><span class="token punctuation">(</span><span class="token string">&quot;amount&quot;</span><span class="token punctuation">,</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#optable&gt;tr[bgcolor=&#39;#F0F0F0&#39;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;请求成功，有新增成绩&#39;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            
            <span class="token comment">//console.log(r)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">ontimeout</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;错误-河工程成绩提醒&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;请求超时&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">timeout</span><span class="token operator">:</span><span class="token number">5000</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;请求超时&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onerror</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">GM_notification</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;错误-河工程成绩提醒&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;连接不到服务器&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">timeout</span><span class="token operator">:</span><span class="token number">5000</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><hr>`,12),m={href:"https://scriptcat.org/script-show-page/220",class:"fright",target:"_blank",rel:"noopener noreferrer"},b=s("img",{src:"https://scriptcat.org/assets/logo.png",height:"14"},null,-1);function g(f,y){const t=e("font"),o=e("ExternalLinkIcon");return i(),l("div",null,[d,u(" more "),s("p",null,[n("自用脚本，"),a(t,{color:"red"},{default:p(()=>[n("bug很多")]),_:1})]),a(t,{color:"red"},{default:p(()=>[n("本脚本为后台脚本，仅限脚本猫(ScriptCat)运行，请勿在油猴安装")]),_:1}),v,s("p",null,[n("此脚本仅用于脚本爱好者内部交流学习使用 "),s("a",m,[n("在"),b,n("脚本猫中安装"),a(o)])])])}const _=c(k,[["render",g],["__file","gradealert.html.vue"]]);export{_ as default};
